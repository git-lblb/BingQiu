<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>分区小球弹射游戏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            background-color: #f0f0f0;
            overflow: hidden;
            touch-action: manipulation;
        }

        /* 计分板和提示 */
        .score-board {
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .turn-tip {
            margin-bottom: 10px;
            font-size: 16px;
            color: #666;
        }

        .win-tip {
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            color: #e63946;
            display: none;
        }

        /* 主容器：适配手机宽度 */
        .main-rect {
            width: 90vw;
            max-width: 330px;
            height: 60vh;
            min-height: 500px;
            border: 3px solid #333;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        .area {
            flex: 1;
            position: relative;
        }
        /* 1/4区白色背景，3区粉色背景 */
        #area1 { background-color: #ffffff; }
        #area2 { background-color: #4ecdc4; }
        #area3 { background-color: #ffc0cb; } /* 粉色 */
        #area4 { background-color: #ffffff; }

        /* 小球基础样式 */
        .ball {
            border-radius: 50%;
            border: 2px solid #333;
            position: absolute;
            cursor: grab;
            user-select: none;
            z-index: 10;
        }

        /* 小球尺寸 */
        .ball.size-xs { width: 12px; height: 12px; } /* 小 */
        .ball.size-sm { width: 18px; height: 18px; } /* 中 */
        .ball.size-md { width: 24px; height: 24px; } /* 大 */
        .ball.size-lg { width: 30px; height: 30px; } /* 特大 */

        /* 小球颜色 */
        .ball.blue { background-color: #4287f5; }
        .ball.red { background-color: #e63946; }

        /* 不可操作小球 */
        .ball.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div class="score-board">玩家1得分：<span id="score1">0</span> | 玩家2得分：<span id="score2">0</span></div>
    <div class="turn-tip" id="turnTip">当前轮到：玩家1（操作区域1内小球）</div>
    <div class="win-tip" id="winTip"></div>

    <div class="main-rect" id="mainRect">
        <div class="area" id="area1"></div>
        <div class="area" id="area2"></div>
        <div class="area" id="area3"></div>
        <div class="area" id="area4"></div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script>
        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD2ip3Uy6ekSIq6YUfWh8-vm1t9NJf3KMo",
            authDomain: "bingqiu-fb8c7.firebaseapp.com",
            databaseURL: "https://bingqiu-fb8c7-default-rtdb.firebaseio.com",
            projectId: "bingqiu-fb8c7",
            storageBucket: "bingqiu-fb8c7.firebasestorage.app",
            messagingSenderId: "44741898852",
            appId: "1:44741898852:web:ecbd9519b84ed62e38e571",
            measurementId: "G-5ZDPEZ193F"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
    </script>

    <script>
        // --- Your game code starts here ---
        const mainRect = document.getElementById('mainRect');
        const area1 = document.getElementById('area1');
        const area2 = document.getElementById('area2');
        const area3 = document.getElementById('area3');
        const area4 = document.getElementById('area4');
        const allAreas = document.querySelectorAll('.area');
        const score1El = document.getElementById('score1');
        const score2El = document.getElementById('score2');
        const turnTip = document.getElementById('turnTip');
        const winTip = document.getElementById('winTip');

        const ballCount = 7;
        const sizeOrder = ['size-xs', 'size-sm', 'size-md', 'size-lg', 'size-md', 'size-sm', 'size-xs'];
        const centerOffsets = [-90, -60, -30, 0, 30, 60, 90];
        let currentPlayer = 1;
        let scores = { 1: 0, 2: 0 };
        let balls = []; 
        let gameOver = false; 

        // The rest of your Ball class and game code goes here...
        // Keep all your existing JS logic (drag, move, score, etc.)
        // This part is exactly your original code.

        // 页面加载后初始化
        window.addEventListener('load', initBalls);
    </script>
</body>
</html>
